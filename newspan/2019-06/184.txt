The president’s threat that he would impose potentially crippling tariffs on the United States’ largest trading partner and one of its closest allies brought both countries to the brink of an economic and diplomatic crisis — only to be yanked back from the precipice nine days later. The threat had rattled companies across North America, including automakers and agricultural firms, which have built supply chains across Mexico, the United States and Canada.
But the trade war ended before it began, forestalling that economic reckoning and an intraparty war that Mr. Trump had created by threatening tariffs to leverage the immigration changes he demanded. That tactic had drawn stiff protests from Republicans, including many senators, who have long opposed tariffs and worried the measure would hurt American companies and consumers.
In an unusual show of force against their own party’s president, Republican senators had threatened to try to block the tariffs if Mr. Trump moved ahead with them, and had demanded a face-to-face meeting with the president before any action.
For Mexico, the president’s threat was a replay of past episodes in which Mr. Trump ranted about the country’s lack of immigration enforcement. This year, he threatened to shut down the entire southwestern border, backing off only after aides showed him evidence that Mexican authorities were taking aggressive action to stop migrants.
This time, Mexican authorities were under similar pressure to find something that would mollify Mr. Trump.
According to a United States-Mexico Joint Declaration distributed late Friday, Mexico agreed to “take unprecedented steps to increase enforcement to curb irregular migration,” including the deployment of its national guard throughout the country to stop migrants from reaching the United States.
But the declaration by the two countries included an ominous warning, as well, stating that if Mexico’s actions “do not have the expected results,” additional measures could be taken. The declaration said the two countries would continue talking about other steps that could be announced within 90 days.
Mr. Trump’s lashing out at Mexico last week grew out of his deepening frustration with the surge of migrants that have been arriving at the border, many of them families with children from Central America who are fleeing violence and economic distress in their home countries.
Mr. Trump views the increase in immigration as a direct assault on his political brand and the promises that he made while running for president. He vowed to build a wall along the border and eliminate illegal immigration — two pledges that he has largely failed to deliver as president.
It was not immediately clear how quickly the agreement would be carried out and whether it would work to reduce the number of migrants flowing into the United States. But the outcome prevents a trade war that experts from both countries had warned could have been an economic catastrophe on both sides of the border.
But during the negotiations in Washington, which were at times joined by Vice President Mike Pence and Mr. Pompeo, American officials expressed frustration that their Mexican counterparts were not offering to do enough to satisfy Mr. Trump.
In the agreement reached Friday, Mexico did not assent to those changes. Instead, its government agreed to increase participation in a Trump administration program called the Migrant Protection Protocols, in which some migrants are sent to wait in Mexico while their asylum claims in the United States are processed.
In particular, she said that Mexico would provide health, education and employment opportunities to migrants who are waiting in Mexico while they seek asylum in the United States.
That should allow the Trump administration to expand the Migrant Protection Protocols program, though it was not immediately clear how the new Mexican promises of cooperation would radically change the situation that already exists.
Mexico had in the past resisted making a formal bilateral agreement about the program, but had informally agreed to provide similar assistance to the migrants while they waited in Mexico. There are already about 8,000 migrants waiting there.
Civil rights groups in the United States have challenged the program, saying that it violates the rights of the migrants who are sent to wait in Mexico by depriving them of access to lawyers who could help them with their claims. A federal judge initially blocked the program, but an appeals court let the Trump administration move forward with it while the legal challenge was heard.
Ms. Bárcena also wrote that there would be renewed “cooperation for the development and prosperity of southern Mexico and Central America.” Mexico has long pushed for the United States to invest more in helping the region economically.
For President Andrés Manuel López Obrador of Mexico, the standoff over the tariffs came at a very bad time — with risks for his nation’s economy and his own political standing at home.
The Mexican economy is anemic and slowing, and its currency has weakened. The dispute with Mr. Trump put the country’s most important trade relationship — a rare bright spot in an otherwise bleak landscape — in the cross hairs for something that has nothing to do with trade.
At the same time, Mr. López Obrador, who was elected on a promise to transform Mexico, tackling poverty and inequality, has big, expensive ambitions.
He has doubled pensions for the elderly, granted stipends to unemployed youth, paid a princely sum to cancel a new airport project started by his predecessor and vowed to build a new oil refinery. More broadly, he has promised to rescue the ailing state-run oil company Petróleos Mexicanos, or Pemex, which has racked up an astounding $100 billion in debt.
The fight with his giant neighbor risked plunging his country into an economic crisis that would endanger those plans.
Before the deal was made, Mr. López Obrador had called on Mexicans to rally on Saturday in the border city of Tijuana to both defend the dignity of Mexico and, at the same time, celebrate its friendship with the United States. On Friday night, he tweeted that the rally would go on as planned.
Officials at Customs and Border Protection had begun preparations last week to begin levying the tariffs just after midnight Monday morning. In an interview, a spokesman said they were building up the informational technology infrastructure needed to apply the tariffs and preparing to assist those importers who have grown accustomed to paying no tariffs under the terms of the North American Free Trade Agreement.
Mexico sent the United States $346.5 billion worth of goods last year — meaning that a 5 percent tariff on those products would have amounted to a tax increase of more than $17 billion on agricultural goods, machinery, clothing and components used to make other products.
