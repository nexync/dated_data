The men did not enter the main embassy buildings and later withdrew from the compound, joining thousands of protesters and militia fighters outside chanting “Death to America,” throwing rocks, covering the walls with graffiti and demanding that the United States withdraw its forces from Iraq.
The situation remained combustible, with the crowd vowing to camp indefinitely outside the sprawling compound, the world’s largest embassy. Their ability to storm the most heavily guarded zone in Baghdad suggested that they had received at least tacit permission from Iraqi security officials sympathetic to their demands.
President Trump, faced with scenes of unfolding chaos at an American embassy, lashed out against Iran, which he blamed for the protests.
“Iran will be held fully responsible for lives lost, or damage incurred, at any of our facilities,” he said in a tweet. “They will pay a very BIG PRICE! This is not a Warning, it is a Threat. Happy New Year!” He also spoke with Prime Minister Adel Abdul Mahdi about the need to protect Americans and American facilities.
Roughly 750 additional American troops will deploy to the region immediately, Secretary of Defense Mark Esper said late Tuesday. “This deployment is an appropriate and precautionary action taken in response to increased threat levels against U.S. personnel and facilities,” he said. The troops are likely to deploy to Kuwait.
Mr. Trump has long called for an end to American conflicts in the Middle East, but has been reluctant to pull troops from the region despite his remarks on the campaign trail.
Secretary of State Mike Pompeo spoke by telephone with Mr. Abdul Mahdi and President Barham Salih in separate calls, and “made clear the United States will protect and defend its people,” according to a summary of the call from the State Department. It said that the Iraqi leaders “assured the secretary that they took seriously their responsibility” to safeguard American officials and property.
The State Department said that American personnel were safe and that there were no plans to evacuate the embassy. The ambassador, Matt Tueller, had been traveling and was not at the embassy when it was breached on Tuesday.
But the size of the American response — five strikes in Iraq and Syria that killed two dozen fighters and wounded dozens of others — prompted condemnation from across the political spectrum in Iraq, and accusations that the United States had violated Iraqi sovereignty. It also drew sharp criticism and serious threats of reprisals from Iraq’s Iranian-backed militias.
The fact that the Iraqi government permitted militia members to enter the fortified Green Zone on Tuesday, allowing the protest to happen, demonstrated Iran’s powerful influence as well as the government’s difficulty in controlling the militias.
But the Iraqi leadership’s success in averting a deeper incursion into the embassy compound and preventing any confrontation with American personnel suggested that the government may have intended to allow the militias to vent their anger with minimal damage.
The United States military made a show of force in response to the turmoil, with helicopter gunships circling overhead. From inside the compound, loudspeakers warned the crowd outside to keep away from the walls.
The Pentagon sent 120 Marine reinforcements to Baghdad from Kuwait, roughly the same number sent to the embassy in 2014, when the Islamic State was threatening Baghdad.
The protest began Tuesday morning when thousands of militia members gathered outside the Green Zone after prayer services for the fighters killed in the American strikes.
While few of them were armed, many were members of Kataib Hezbollah and other fighting groups that are technically overseen by the Iraqi military. Kataib Hezbollah is separate from the Hezbollah movement in Lebanon, although both groups are backed by Iran and oppose the United States.
When the protesters pushed toward the entrance to the Green Zone, a heavily guarded district of government offices and embassies in central Baghdad, the Iraqi security forces did not stop them.
Their accession to the protesters was a marked contrast to their treatment of the antigovernment protesters who have been demonstrating outside the Green Zone for months. Those protesters were met with tear gas and bullets and have not been able to enter the Green Zone.
Once at the embassy, the protesters on Tuesday used long poles to shatter security cameras. They covered the compound walls with anti-American graffiti and set a guardhouse on fire.
After breaking open a compound entrance, dozens of men entered and lit more fires while embassy security guards watched them from the embassy roof and fired tear gas.
One group of protesters ended up separated from United States troops by only a pane of glass, according to a video shared on social media. It was not immediately clear how many Americans were inside the compound, but officials said they sheltered in place and were unhurt.
The embassy complex, which opened in 2009 and cost an estimated $736 million to build, covers 104 acres, nearly as big as Vatican City, the world’s smallest country. By 2012, nearly 16,000 people worked there — most of them contractors, but also diplomats, military personnel, intelligence officers and aid workers — but the staff declined sharply over the following years.
The embassy and an American consulate in Erbil, in northern Iraq, now have a combined staff of 486 people, with the majority in Baghdad.
The scenes there on Tuesday stirred memories of the seizure of two searing, politically consequential events in recent American history: the seizure of the embassy and 52 hostages in Tehran during the Islamic Revolution in 1979, and the assault on a United States diplomatic compound in Benghazi, Libya, in 2012.
As a congressman, Mr. Pompeo became a political star among Republicans for blistering criticism of Hillary Clinton, then the secretary of state, over the Benghazi attack, which killed four Americans, including Ambassador Christopher Stevens.
The protesters eventually left the Baghdad compound, but some climbed on top of adjacent buildings, where they planted militia flags. Iraqi police and military personnel eventually arrived at the scene, but they did not disperse the protesters.
The upheaval comes at a critical time for Iraq and for the United States’ role in the country. Mass protests in recent months against poor governance have weakened the government and underscored the criticism of Iraqis who feel that Iran has too much sway over the country’s politics.
At the same time, Iran and the United States have been competing for political influence in the aftermath of the battle against the Islamic State, which once ruled large areas of Iraq.
Iraqi militias, known as the Popular Mobilization Forces, were formed in part to help fight the Islamic State in tandem with the national security forces, a battle that effectively put them on the side of the United States.
The United States has about 5,200 troops in Iraq, down from a peak of 170,000 in 2007, in addition to a number of civilian contractors. The troops are stationed primarily at a base in Anbar Province, northwest of Baghdad, and at another in the Kurdish-controlled north of country. Their task is to train Iraqi security forces and help prevent a resurgence of the Islamic State.
In a statement, the Iraqi Foreign Ministry reiterated the government’s condemnation of the strikes, but called on protesters to stay away from foreign embassies.
“Any attack on foreign embassies or representatives will be firmly prevented by the security forces and punishable by law with the most severe penalties,” it said.
Falih Hassan reported from Baghdad, Ben Hubbard from Beirut, Lebanon, and Alissa J. Rubin from Paris. Edward Wong and Thomas Gibbons-Neff contributed reporting from Washington.