PHILADELPHIA — Trapped in a bathroom on the second floor of a three-story Philadelphia rowhouse, the two police officers huddled together. They could hear the gunman roaming downstairs, shouting and shooting at them through the ceiling.
The officers needed help. But sending more of the police into the home would be too dangerous. “You will possibly encounter the active shooter as you enter,” one officer warned a SWAT team member who was prepared to rush inside.
SWAT officers retreated.
That moment, captured on police radio, revealed how an attempt to serve a narcotics warrant Wednesday afternoon quickly escalated into a shootout; a tense, four-way phone call with the suspect, his lawyer, the Philadelphia district attorney and the police commissioner; and a dramatic eight-hour standoff that paralyzed North Philadelphia. Six police officers were struck by gunfire and treated for mostly minor wounds.
Over the next several minutes, dozens of law enforcement officers swarmed the street, a mix of townhouses and apartment buildings in the Nicetown-Tioga neighborhood, with so many patrol cars haphazardly parked that an armored SWAT vehicle struggled to find a clear route in.
Beginning at about 4:30 p.m., and continuing through the evening, frightened neighbors watched from their stoops or windows as the sound of gunfire echoed.
“Shots fired! Shots fired!” a male police officer yelled into the radio, and repeated many times in an increasingly frantic voice.
On Thursday, after the standoff ended with the suspect’s surrender, state and city leaders denounced the episode as the latest evidence that America urgently needs lawmakers to restrict access to guns.
The suspect, whom the police identified as Maurice Hill, 36, has an extensive criminal history, court records show. He is accused of firing at the officers with an AR-15-style rifle.
Moments after the shooting began, police officers cleared out a nearby day-care center, holding children’s hands and carrying babies in their arms, said Mayor Jim Kenney, whose voice shook on Thursday afternoon as he recalled the evacuation.
The police said narcotics officers had arrived on Wednesday afternoon at the 3700 block of 15th Street to serve a warrant. Larry Krasner, Philadelphia’s district attorney, would not say Thursday whether the warrant identified Mr. Hill, or whether it was for the house where the shooting took place. The Philadelphia Inquirer quoted sources as saying the warrant had been for a nearby home.
The gunfire began moments after the officers entered the house where Mr. Hill and several other people were. Four shots. A few minutes later, two shots.
Anthony Edward Fields, who lives directly across the street, said he came downstairs at about 4:45 p.m. to see more than two dozen police officers kneeling in front of his door while one of their colleagues was lying wounded on the sidewalk.
About 15 minutes later, Mr. Fields said, he watched the standoff from behind his front window and saw the police exchange many rounds of gunfire with the gunman.
Jonathan Lee, who has lived on the block all his life, estimated that he heard 60 or 70 shots during the standoff. Police officers told him to stay in his home.
Three injured officers arrived at Temple University Hospital within five minutes of each other, said Jeremy Walter, a hospital spokesman. The other three officers were taken to a different hospital whose spokesperson did not return calls Thursday.
On the police radio, emergency workers said one officer had been grazed in the head. Another had been shot in both arms, and the third in a leg.
While their fellow officers were being treated, the two officers who were trapped in the home said on the radio that they had three people in handcuffs but were “pinned down” on the second floor. The gunman continued to rampage downstairs.
“These officers were astute enough and wise enough and brave enough to say, ‘Do not come in here,’” said Commissioner Richard Ross Jr. of the Philadelphia Police Department, who tried talking Mr. Hill into surrendering Wednesday evening and was told by a hostage negotiator what to say.
“For a long time last night, I know our collective hearts were in our throats,” he said Thursday.
Nearly four hours into the standoff, at about 8:15 p.m., Shaka Johnson was flipping back and forth between the Phillies game and live television coverage of the barricade when his phone rang.
The voice on the line was that of Mr. Hill, a former client.
Mr. Johnson feared for his client’s safety and told him he needed to keep himself alive for his 16-year-old son and his baby daughter, who had been born just days before.
“You don’t want to be the father whose son has PTSD from his father getting gunned down on TV,” Mr. Johnson said he had told Mr. Hill.
The two spoke for a while before Mr. Johnson suggested that he could get Mr. Krasner, the district attorney, on the line. Maybe bringing in the city’s top prosecutor would make Mr. Hill believe he could exit the house safely.
Mr. Krasner missed the lawyer’s first call, which came in at 9:01 or 9:02 p.m., but quickly called Mr. Johnson back. Within minutes, he was patched into a three-way conversation with Mr. Hill.
Before long, Commissioner Ross joined the call. All three men tried to convince Mr. Hill to surrender, Mr. Johnson said.
Mr. Johnson claimed Mr. Hill did not know that two police officers were trapped in the rowhouse and believed that the noises he heard from upstairs were from officers raiding the building to arrest him.
“He was saying to me, ‘Shaka, stand them down, they’re trying to come in from the third floor,’” Mr. Johnson recalled.
Just before 9:25 p.m., SWAT teams freed the two trapped officers and the three people they had arrested. Commissioner Ross would not say how they had gotten out while Mr. Hill was still downstairs.
At 11:10 p.m., Commissioner Ross called Mr. Johnson and gave Mr. Johnson until 11:45 to convince Mr. Hill to come out. Mr. Hill said he was not leaving unless his lawyer was there.
Mr. Johnson drove to North Philadelphia. The police clad him in a bullet-resistant vest and let him speak to Mr. Hill through a megaphone to prove he was there.
Mr.  Mr. Hill — whose criminal history includes convictions for illegally owning a semiautomatic handgun and revolver, driving under the influence, assault, fleeing an officer and resisting arrest — had told the police during the standoff that he did not want to return to jail.
He remained inside.
And then, around midnight, the police deployed tear gas into the home.
“I’m coming out!” Mr. Hill said, according to Mr. Johnson. He had his hands in the air and claimed he did not have a gun. Commissioner Ross said he had a handgun in his pocket when he surrendered.
On Thursday, Mr. Krasner said Mr. Hill would face charges of attempted murder, aggravated assault and the illegal possession of firearms. The United States attorney’s office for the Eastern District of Pennsylvania is also investigating the shooting.
After he surrendered, Mr. Hill was taken to a hospital to be treated for tear gas exposure.
Three hours later, he was released from the emergency room. A police van awaited.