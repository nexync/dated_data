BAGHDAD — Defense Secretary Jim Mattis, on the first visit by a senior Trump administration official to Iraq, worked on Monday to repair breaches of trust with Iraq’s leaders caused by his boss just as the two sides began a major offensive to oust the Islamic State from its last stronghold in the country.
Mr. Mattis found himself in nearly the same position he was in during his just-finished trip to Europe, where much of his time was spent reassuring wary allies that the United States was still committed to NATO after statements and actions by President Trump seemed to call old alliances into question.
Before arriving in Baghdad, Mr. Mattis was asked by reporters about Mr. Trump’s remarks during a visit to C.I.A. headquarters last month that the United States should have “kept” Iraq’s oil after the American-led invasion, and might still have a chance to do so.
“We’re not in Iraq to seize anybody’s oil,” Mr. Mattis said during a stop in Abu Dhabi, in the United Arab Emirates.
Mr. Mattis also found himself allaying concerns that the administration would exclude from the United States Iraqis who have worked and fought side by side with American troops.
Mr. Trump’s initial executive order shutting the door to citizens of seven predominantly Muslim countries included Iraq. That order has been stayed by the courts and is expected to be replaced soon.
His remarks came as Lt. Gen. Stephen Townsend, the commander of the United States’ war effort in Iraq, said that American trainers and advisers had moved closer to the front lines of Mosul, where the fight to retake the western half of the city from the Islamic State started over the weekend.
“It is true that we’re operating closer and deeper into Iraqi formations,” General Townsend said at a news conference with Mr. Mattis in Baghdad, acknowledging a shift approved in the Obama administration’s final weeks.
While Mr. Trump’s policy pronouncements have unsettled allies around the world, they have landed especially hard in Iraq, where about 5,000 American troops are assisting Iraqi forces in the fight against the Islamic State, also known as ISIS or ISIL.
A former Iraqi ambassador to Washington, Lukman Faily, said last month that Iraqis were unsettled by Mr. Trump’s moves, including the travel ban, and wondered whether the United States even wanted a long-term relationship with Iraq.
On Monday, American and Iraqi officials did their best to put forward a united front at a time when a critical battle against the Islamic State is intensifying.
Mr. Mattis, after meeting with his Iraqi counterpart and Prime Minister Haider al-Abadi, said the militant Sunni group’s days were numbered. 
Apache helicopter gunships as well as American and other allied artillery are set to strike Islamic State targets in and around western Mosul, as they have for weeks in the fight to reclaim what was once Iraq’s second-largest city, officials said.
American commanders estimate that 2,000 to 3,000 Islamic State fighters remain hunkered down in western Mosul.
Mr. Trump has asked the Pentagon to present a plan for accelerating the fight against the Islamic State in Iraq and Syria.
While defense officials have yet to present him with new options, many Pentagon officials have been operating under the assumption that Mr. Trump will be more willing than President Barack Obama to sign off on having American troops closer to the battlefield.
Yet it was in the final weeks of Mr. Obama’s presidency that the move closer to the front lines was put in place, as Iraqi security forces began their push to retake eastern Mosul from the Islamic State.
When Mr. Obama authorized sending the first group of American trainers and advisers back to Iraq in 2014, he said he did not want them getting close to the fight, insisting that it be an Iraqi-led effort. With the exception of raids by Special Forces, American troops had largely stayed off the battlefield, embedded with Iraqi officers at the brigade level.
That changed in November, United States military officials said Monday, when the administration allowed American trainers and advisers to move closer to the battlefield for the Mosul operation.
The change, military officials said, will allow for quicker response times, particularly when it comes to calling in airstrikes.
Ever since the start of United States-led airstrikes against the Islamic State, in August 2014, American pilots have complained that depending on Iraqi troops to call in airstrikes makes for slow response times.
Now, two years into the war against the Islamic State and in the middle of the fight to retake Mosul, American commanders said on Monday that operations were speeding up. For one thing, they said, the Iraqi ground troops are now much sharper.
Recently, “one American commander said, ‘I’m watching an army that I know is Iraqi, but if I step back, I wouldn’t know they were not American,’ ” said Brig. Gen. Matthew C. Isler, the deputy commander in charge of coordinating air support for the Iraqi ground forces.
Over the weekend, airplanes dropped leaflets in West Mosul appealing to Islamic State fighters to surrender.
He said that although power had been transferred in Washington, the rules of engagement in Iraq had not changed, and American Special Forces would not get closer to the fighting in western Mosul than they had in eastern Mosul, which had largely been cleared of militant control.
“The U.S. forces continue in the same role as they did in East Mosul,” Mr. Mattis said, adding that coalition forces fighting the Islamic State would “continue with the accelerated effort” to destroy the group.