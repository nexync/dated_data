ALBANY — Months after being halted by the New York attorney general, daily fantasy sports won a major victory early Saturday as state lawmakers moved to legalize the online games.
Gov. Andrew M. Cuomo, a Democrat, has not yet indicated that he will sign the bill, but the final legislation included proposed modifications from his staff, suggesting at least some degree of support.
Eric T. Schneiderman, the attorney general, who first declared war on the industry in the fall by declaring daily fantasy sports to be illegal gambling, laid the groundwork for a deal in March when he suggested a June 30 deadline for the Legislature to act to address the games’ legal status.
Mr. Schneiderman was neutral on the Legislature’s action on Saturday, calling it “a law that it will be my job to enforce and defend,” but he added that his office would continue to pursue claims against DraftKings and FanDuel, the industry’s two biggest companies, over allegations of consumer fraud and false advertising.
The businesses’ legislative backers in New York have insisted that fantasy sports is not gambling — which is mostly barred by the state’s Constitution — but rather is “based upon the skill and knowledge of the participants.” The widely advertised games, in which players create imaginary teams using real players and win or lose depending on the players’ statistics, would be classified as games of skill, not chance, a distinction under a 2006 federal law governing online wagering.
Under the deal agreed to by lawmakers, highly skilled and high-volume players will have to be clearly identified on the sites, a provision intended to protect casual players from being targeted and taken advantage of by more sophisticated players, something that some class-action lawsuits have alleged takes place and that law enforcement has investigated.
Companies will pay the state the equivalent of 15.5 percent of their revenue to operate, an amount that supporters have estimated to be nearly $6 million a year. Funds collected by the state will be directed to an education fund run by the state lottery.
The battle over daily fantasy sports has been fought hard in Albany, the state capital, culminating in a protracted wait — stretching past midnight — as supporters of the legislation cemented enough support for the bill to pass the State Senate. It had passed the Assembly earlier Friday.
The New York deal is a lifeline for an industry so battered that FanDuel and DraftKings, once bitter rivals, are in merger talks, according to two people familiar with the negotiations. Both companies declined to comment about the talks.
New York had more than 10 percent of the nation’s daily fantasy players at the time the businesses were barred by the state, and the companies’ bottom lines have taken a beating since they pulled out under the March agreement with Mr. Schneiderman.
“There have been meaningful reductions as well as difficulty raising capital,” said Adam Krejcik of Eilers & Krejcik Gaming, a financial research firm that covers fantasy sports.
He added that “the hope is New York could serve as proxy or benchmark” as to how attorneys general and legislators proceed.
When DraftKings and FanDuel blitzed broadcasts with hundreds of millions of dollars in commercials at the beginning of the N.F.L. season last year, daily fantasy sports appeared to be a virtual cash machine. Each company was valued at more than $1 billion, and their investors included Major League Baseball, the N.B.A., and the N.F.L. owners Jerry Jones and Robert K. Kraft, as well as major media companies like NBC.
New York is the eighth and most important market to pass legislation to legalize the games, which are under scrutiny in other player-rich states, such as Florida, Illinois and Texas.
Such concerns did not seem to affect the enthusiasm of State Senator John J. Bonacic, the chairman of the Racing, Gaming and Wagering Committee.
